{%- comment -%}
  Template: VHS VCR Page
  Usage: This template can be applied to any page through the Shopify admin panel
  under page settings. Supports dynamic sections for flexible layouts.
{%- endcomment -%}

<div class="page-width">
  <div class="template-page-vhsVCR" {{ section.shopify_attributes }}>
    {% section 'vhs-page-header' %}

    <div class="sections-wrapper">
      {%- for block in section.blocks -%}
        {%
          render block.type,
          block: block,
          settings: block.settings
        %}
      {%- endfor -%}
    </div>
  </div>
</div>

{%- style -%}
  {% if page.metafields.custom.background_color != blank %}
    .template-page-vhsVCR {
      background-color: {{ page.metafields.custom.background_color }};
    }
  {% endif %}
  {% if page.metafields.custom.background_image != blank %}
    .template-page-vhsVCR {
      background-image: url({{ page.metafields.custom.background_image | image_url: width: 2000 }});
      background-size: cover;
      background-position: center;
    }
  {% endif %}
{%- endstyle -%}

{% schema %}
{
  "name": "VHS VCR Page",
  "tag": "section",
  "class": "spaced-section",
  "blocks": [
    {
      "type": "full_width_media",
      "name": "Media Section",
      "limit": null
    },
    {
      "type": "video_block",
      "name": "Video Block",
      "limit": null
    },
    {
      "type": "text",
      "name": "Text Block",
      "limit": null
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Page Settings"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    }
  ],
  "presets": [
    {
      "name": "VHS VCR Page",
      "category": "Page Templates"
    }
  ]
}
{% endschema %}

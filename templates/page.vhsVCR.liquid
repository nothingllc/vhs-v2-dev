{%- comment -%}
  Template: VHS VCR Page
  Usage: This template can be applied to any page through the Shopify admin panel
  under page settings. Supports dynamic sections for flexible layouts.
{%- endcomment -%}

{%- for section in section.blocks -%}
  {% case section.type %}
    {% when 'header' %}
      {% section 'vhs-page-header' %}
    {% when 'video' %}
      {% section 'vhs-video-block' %}
    {% when 'media' %}
      {% section 'vhs-full-width-media' %}
    {% when 'contact' %}
      {% section 'vhs-contact-form' %}
  {% endcase %}
{%- endfor -%}

{%- style -%}
  {% if page.metafields.custom.background_color != blank %}
    .template-page-vhsVCR {
      background-color: {{ page.metafields.custom.background_color }};
    }
  {% endif %}
  {% if page.metafields.custom.background_image != blank %}
    .template-page-vhsVCR {
      background-image: url({{ page.metafields.custom.background_image | image_url: width: 2000 }});
      background-size: cover;
      background-position: center;
    }
  {% endif %}
{%- endstyle -%}

{% schema %}
{
  "name": "VHS VCR Page",
  "blocks": [
    {
      "type": "header",
      "name": "Page Header",
      "limit": 1
    },
    {
      "type": "video",
      "name": "Video Block"
    },
    {
      "type": "media",
      "name": "Full Width Media"
    },
    {
      "type": "contact",
      "name": "Contact Form"
    }
  ],
  "presets": [
    {
      "name": "VHS VCR Page",
      "blocks": [
        {
          "type": "header"
        }
      ]
    }
  ]
}
{% endschema %}
